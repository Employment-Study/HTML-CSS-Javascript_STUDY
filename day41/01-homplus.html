<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>01-homeplus.html</title>
        <style>
            .container {
                font-size: 20px;
                font-weight: 700;
            }
            table {
                margin: auto;
                border-collapse: collapse;
                border: 2px solid black;
            }

            th {
                background-color: lightskyblue;
            }

            th:hover {
                background-color: blue;
                color: white;
                cursor: pointer;
            }

            th,
            td {
                padding: 10px;
                border: 1px solid black;
            }

            tbody > tr:hover {
                background-color: #ccc;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <table>
                <h1>01-homeplus.html</h1>
                <hr />
                <thead>
                    <tr>
                        <th class="name">상품이름</th>
                        <th class="price">가격</th>
                        <th class="salesCount">판매건수</th>
                        <th class="grade">점수</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <script src="./homeplus(berry).js"></script>
        <script>
            // 오름차순정렬 / 내림차순 정렬 boolean
            let isNameSorted = false;
            let isPriceSorted = false;
            let isSalesCountSorted = false;
            let isGraddeSorted = false;

            const dataList = arr.map((ob) => {
                const data = {
                    name: ob.name,
                    price: ob.price,
                    salesCount: ob.salesCount,
                    grade: ob.grade,
                };
                return data;
            });
            console.log(dataList);
            const tbody = document.querySelector("tbody");
            let tag = ``;
            dataList.forEach((e) => {
                tag += `<tr>`;
                tag += `<td>${e.name}</td>`;
                tag += `<td>${e.price}</td>`;
                tag += `<td>${e.salesCount}</td>`;
                tag += `<td>${e.grade}</td>`;
                tag += `</td>`;
            });
            tbody.innerHTML += tag;

            // name을 클릭하면 각 객체의 name을 기준으로 정렬하기
            const name = document.querySelector("th.name");
            const price = document.querySelector("th.price");
            const salesCount = document.querySelector("th.salesCount");
            const grade = document.querySelector("th.grade");

            name.onclick = function () {
                const trList = document.querySelectorAll("tbody > tr");
                const trArray = Array.from(trList);
                if (!isNameSorted) {
                    trArray.sort((a, b) => {
                        const nameA =
                            a.querySelector("td:nth-child(1)").innerText;
                        const nameB =
                            b.querySelector("td:nth-child(1)").innerText;
                        return nameA > nameB ? 1 : -1;
                    });
                } else {
                    trArray.sort((a, b) => {
                        const nameA =
                            a.querySelector("td:nth-child(1)").innerText;
                        const nameB =
                            b.querySelector("td:nth-child(1)").innerText;
                        return nameA < nameB ? 1 : -1;
                    });
                }
                trArray.forEach((tr) => tbody.appendChild(tr));
                isNameSorted = !isNameSorted;
            };

            price.onclick = function () {
                const trList = document.querySelectorAll("tbody > tr");
                const trArray = Array.from(trList);
                if (!isPriceSorted) {
                    trArray.sort((a, b) => {
                        const priceA =
                            +a.querySelector("td:nth-child(2)").innerText;
                        const priceB =
                            +b.querySelector("td:nth-child(2)").innerText;
                        return priceA > priceB ? 1 : -1;
                    });
                } else {
                    trArray.sort((a, b) => {
                        const priceA =
                            +a.querySelector("td:nth-child(2)").innerText;
                        const priceB =
                            +b.querySelector("td:nth-child(2)").innerText;
                        return priceA < priceB ? 1 : -1;
                    });
                }
                trArray.forEach((tr) => tbody.appendChild(tr));
                isPriceSorted = !isPriceSorted;
            };

            salesCount.onclick = function () {
                const trList = document.querySelectorAll("tbody > tr");
                const trArray = Array.from(trList);
                if (!isSalesCountSorted) {
                    trArray.sort((a, b) => {
                        const salesCountA =
                            +a.querySelector("td:nth-child(3)").innerText;
                        const salesCountB =
                            +b.querySelector("td:nth-child(3)").innerText;
                        return salesCountA > salesCountB ? 1 : -1;
                    });
                } else {
                    trArray.sort((a, b) => {
                        const salesCountA =
                            +a.querySelector("td:nth-child(3)").innerText;
                        const salesCountB =
                            +b.querySelector("td:nth-child(3)").innerText;
                        return salesCountA < salesCountB ? 1 : -1;
                    });
                }
                trArray.forEach((tr) => tbody.appendChild(tr));
                isSalesCountSorted = !isSalesCountSorted;
            };

            grade.onclick = function () {
                const trList = document.querySelectorAll("tbody > tr");
                const trArray = Array.from(trList);
                if (!isGraddeSorted) {
                    trArray.sort((a, b) => {
                        const gradeA =
                            +a.querySelector("td:nth-child(4)").innerText;
                        const gradeB =
                            +b.querySelector("td:nth-child(4)").innerText;
                        return gradeA > gradeB ? 1 : -1;
                    });
                } else {
                    trArray.sort((a, b) => {
                        const gradeA =
                            +a.querySelector("td:nth-child(4)").innerText;
                        const gradeB =
                            +b.querySelector("td:nth-child(4)").innerText;
                        return gradeA < gradeB ? 1 : -1;
                    });
                }
                trArray.forEach((tr) => tbody.appendChild(tr));
                isGraddeSorted = !isGraddeSorted;
            };
        </script>
    </body>
</html>

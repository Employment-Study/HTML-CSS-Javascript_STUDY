<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>03-password.html</title>
        <style>
            .blue {
                font-weight: 700;
                color: blue;
                font-size: 2em;
            }

            .red {
                font-weight: 700;
                color: red;
                font-size: 2em;
            }
        </style>
    </head>
    <body>
        <h1>03-password.html</h1>
        <hr />

        <form action="#" method="get">
            <p><input type="text" id="id" name="id" placeholder="아이디" /></p>
            <p>
                <input
                    type="password"
                    id="pw1"
                    name="pw1"
                    placeholder="비밀번호"
                />
            </p>
            <p>
                <input
                    type="password"
                    id="pw2"
                    name="pw2"
                    placeholder="비밀번호 재확인"
                />
            </p>
            <p id="messageBox"></p>
            <p><button id="submit" disabled="disabled">가입신청</button></p>
        </form>

        <script>
            const id = document.getElementById("id");
            const pw1 = document.getElementById("pw1");
            const pw2 = document.getElementById("pw2");
            const messagebox = document.getElementById("messageBox");
            const submit = document.getElementById("submit");

            const validate = function () {
                const flag3 = id.value != "";
                const flag = pw1.value == pw2.value;

                if (flag && flag3) {
                    const flag2 = pw1.value.length >= 8;
                    messageBox.innerText = flag2
                        ? "조건 만족"
                        : "8자리 이상의 비밀번호";
                    messageBox.className = flag2 ? "blue" : "red";

                    if (flag2) {
                        submit.removeAttribute("disabled");
                    } else {
                        submit.setAttribute("disabled", "disabled");
                    }
                } else {
                    messageBox.className = "red";
                    messageBox.innerText = flag
                        ? "비밀번호 일치"
                        : "비밀번호 불일치";
                    messageBox.innerText += flag3
                        ? "& 아이디 입력완료"
                        : "& 아이디 미입력";
                    submit.setAttribute("disabled", "disabled");
                }
            };

            id.onkeyup = validate;
            pw1.onkeyup = validate; // 변수에 저장된 함수를 연결한다.
            pw2.onkeyup = validate; // 같은 함수에 서로 다른 요소의 이벤트에 연결한다.
        </script>
    </body>
</html>
